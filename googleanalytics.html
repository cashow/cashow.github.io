---
layout: default
title: "GoogleAnalytics设置"
---

<div class="post">
  <header class="post-header">
    <h2 class="post-title">GoogleAnalytics设置</h2>
  </header>
  <article class="post-content">
    <div id="google-analytics-div"></div>
  </article>
</div>

<script type="text/javascript">
  function setCookie(c_name,value,expiredays)
  {
    var exdate=new Date()
    exdate.setDate(exdate.getDate()+expiredays)
    document.cookie=c_name+ "=" +escape(value)+
    ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
  }
  function getCookie(c_name)
  {
    if (document.cookie.length>0)
    {
      c_start=document.cookie.indexOf(c_name + "=")
      if (c_start!=-1)
      { 
        c_start=c_start + c_name.length+1 
        c_end=document.cookie.indexOf(";",c_start)
        if (c_end==-1) c_end=document.cookie.length
          return unescape(document.cookie.substring(c_start,c_end))
      } 
    }
    return ""
  }
  function checkCookie(){
    if(getCookie("google-analytics") === "true"){
      $("#google-analytics-div").html("<button class='google-analytics-button google-analytics-button-off'>关闭GoogleAnalytics</button>");
    }else{
      $("#google-analytics-div").html("<button class='google-analytics-button google-analytics-button-on'>打开GoogleAnalytics</button>");
    }
    $(".google-analytics-button-on").click(function(){
      setCookie("google-analytics", "true", 365);
      setTimeout("checkCookie()",300);
    });

    $(".google-analytics-button-off").click(function(){
      setCookie("google-analytics", "false", 365);
      setTimeout("checkCookie()",300);
    });
  }
  $(document).ready(function(){
    checkCookie();
    $(".google-analytics-button-on").click(function(){
      setCookie("google-analytics", "true", 365);
      setTimeout("checkCookie()",300);
    });

    $(".google-analytics-button-off").click(function(){
      setCookie("google-analytics", "false", 365);
      setTimeout("checkCookie()",300);
    });

  });
</script>